<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="icon" type="image/svg+xml" href="./images/logo.svg">
	<title>Crafting Status</title>
	<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
	<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div id="app"></div>

<script type="text/babel">
	const { useState } = React;

	function StatusIcon({ status }) {
		if (status === 'operational') {
			return <img src={"./images/success.svg"}/>
		}
	}

	function getEventBadgeClassName(type) {
		if (type === 'maintenance') {
			return 'bg-yellow-50 text-yellow-800 ring-yellow-600/20'
		}
		if (type === 'incident') {
			return 'bg-red-50 text-red-700 ring-red-600/10'
		}
	}

	function EventList({ event }) {
		return (
			<div className="py-5">
				<div>
					<p className="flex justify-between items-center">
						<span className="text-lg">{event.title}</span>
						<span
							className={`inline-flex items-center rounded-md  px-2 py-1 text-xs font-medium  ring-1 ring-inset ${getEventBadgeClassName(event.type)}`}>
							{event.type}
						</span>

					</p>
					<p className="text-sm text-slate-400 font-normal">{event.startAt}</p>
				</div>

				<div className="mt-3 w-full rounded-lg shadow-small border p-4 bg-slate-50 text-slate-500 text-sm">
					{event.description}
				</div>
			</div>
		)
	}

	function App() {
		const [eventObj, setEventObj] = useState({
			status: "operational", // | "under_maintenance" | "degraded_performance" | "partial_outage" | "major_outage",
			lastMaintenanceTime: '2023-10-30 00:00:00',
			announcement: 'Crafting service will release new features',
			events: [
				{
					type: 'maintenance', //| “incident”,
					startAt: '2023-10-30 00:00:00',
					endAt: '2023-10-30 00:00:00', // optional
					title: 'Web ui update', // optional
					description: 'Web ui updated successfully' // optional
				},
				{
					type: 'incident', //| “incident”,
					startAt: '2023-09-30 00:00:00',
					endAt: '2023-09-30 00:00:00', // optional
					title: 'Web ui update', // optional
					description: 'Web ui updated successfully' // optional
				},
			]


		});
		return (
			<div className="container mx-auto px-[20px]">

				<nav className="w-full py-4 flex justify-between items-center border-b">
					<a href="https://sandboxes.cloud/" target="_blank" className="flex justify-between items-center">
						<img src="./images/logo.svg" alt=""/>
						<span
							className="font-bold text-large ml-[10px]">
							Crafting
						</span>
					</a>
					<a href="https://www.crafting.dev/contact" target="_blank">
					<span
						className="pointer-events-auto rounded-md bg-[#0c4fca] px-3 py-2 text-[0.8125rem] font-semibold text-white hover:bg-[#0c4fca]/80 cursor-pointer">
						Contact
					</span>
					</a>
				</nav>

				<div className="mt-16 mb-12 sm:mt-20 flex flex-col items-center text-center">
					<StatusIcon status={'operational'}/>
					<h1 className="mt-2 text-3xl font-bold">All services are online</h1>
					<p className="mt-3 text-sm font-normal text-slate-500">Last updated on {eventObj.lastMaintenanceTime}</p>
				</div>

				<div
					className="mb-8 flex border rounded-lg overflow-hidden">
					<div className="p-5 flex items-center justify-center bg-slate-100">
						<img className="w-5 h-5" src="./images/announcement.svg" alt=""/>

					</div>
					<div className="p-5 font-normal text-slate-500">{eventObj.announcement}</div>
				</div>

				<div className="divide-y">
					{
						eventObj.events.map((event, i) => (
							<EventList event={event} key={i}></EventList>
						))
					}
				</div>

			</div>
		);
	}


	const container = document.getElementById('app');
	const root = ReactDOM.createRoot(container);
	root.render(<App/>)
</script>
</body>
</html>
